<!DOCTYPE html>
<!--[if IE 9]><html class="ie9"><![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->

	<head>

		<title th:text="#{application.name} + ' - ' + #{dashboard.label}"></title>

		<meta charset="UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<link rel="shortcut icon" th:href="@{/images/favicon.ico}"/>

		<link th:replace="fragments/style"/>

		<div th:replace="fragments/js"></div>

		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.6.0/jquery.matchHeight-min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.5.0/d3.min.js"></script>

	</head>

	<body class="cards-pf" th:with="menu='dashboard'">

		<div th:replace="fragments/header"></div>

		<div class="container-fluid container-cards-pf">

			<div class="row row-cards-pf">
				<div class="col-xs-6 col-sm-4 col-md-2">
					<div class="card-pf card-pf-accented card-pf-aggregate-status">
						<h2 class="card-pf-title">
							<a href="#">
								<span class="fa fa-trophy"></span>
								<span class="card-pf-aggregate-status-count" th:text="${stats.totalRaces}">[totalRaces]</span> L&auml;ufe
							</a>
						</h2>
						<div class="card-pf-body">
							<p class="card-pf-aggregate-status-notifications">
								<span class="card-pf-aggregate-status-notification">
									<a href="#"><span class="pficon pficon-ok"></span><span th:text="${stats.totalRacesSuccess}">[totalRacesSuccess]</span></a>
								</span>
								<span class="card-pf-aggregate-status-notification">
									<a href="#"><span class="pficon pficon-error-circle-o"></span><span th:text="${stats.totalRacesFailed}">[totalRacesFailed]</span></a>
								</span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-xs-6 col-sm-4 col-md-2">
					<div class="card-pf card-pf-accented card-pf-aggregate-status">
						<h2 class="card-pf-title">
							<a href="#"><span class="fa fa-rocket"></span> L&auml;ngster Lauf</a>
						</h2>
						<div class="card-pf-body">
							<p class="card-pf-aggregate-status-notifications">
								<span class="card-pf-aggregate-status-notification">
									<span th:text="${#numbers.formatInteger(stats.longestDistance,1, 'POINT')}">[longestDistance]</span> km
								</span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-xs-6 col-sm-4 col-md-2">
					<div class="card-pf card-pf-accented card-pf-aggregate-status">
						<h2 class="card-pf-title">
							<a href="#"><span class="fa fa-road"></span> Gesamte Distanz</a>
						</h2>
						<div class="card-pf-body">
							<p class="card-pf-aggregate-status-notifications">
								<span class="card-pf-aggregate-status-notification">
									<span th:text="${#numbers.formatInteger(stats.totalDistance,1, 'POINT')}">[totalDistance]</span> km
								</span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-xs-6 col-sm-4 col-md-2">
					<div class="card-pf card-pf-accented card-pf-aggregate-status">
						<h2 class="card-pf-title">
							<a href="#"><span class="fa fa-globe"></span> Anzahl L&auml;nder</a>
						</h2>
						<div class="card-pf-body">
							<p class="card-pf-aggregate-status-notifications">
								<a href="#"><span class="card-pf-aggregate-status-notification" th:text="${stats.totalCountries}">[totalCountries]</span></a>
							</p>
						</div>
					</div>
				</div>
				<div class="col-xs-6 col-sm-4 col-md-2">
					<div class="card-pf card-pf-accented card-pf-aggregate-status">
						<h2 class="card-pf-title">
							<a href="#"><span class="fa fa-bolt"></span> Tough Mudder</a>
						</h2>
						<div class="card-pf-body">
							<p class="card-pf-aggregate-status-notifications">
								<a href="#"><span class="card-pf-aggregate-status-notification" th:text="${stats.totalRacesToughMudder}">[totalRacesToughMudder]</span></a>
							</p>
						</div>
					</div>
				</div>
				<div class="col-xs-6 col-sm-4 col-md-2">
					<div class="card-pf card-pf-accented card-pf-aggregate-status">
						<h2 class="card-pf-title">
							<a href="#"><span class="fa fa-bolt"></span> XLETIX Challenge</a>
						</h2>
						<div class="card-pf-body">
							<p class="card-pf-aggregate-status-notifications">
								<a href="#"><span class="card-pf-aggregate-status-notification" th:text="${stats.totalRacesXletix}">[totalRacesXletix]</span></a>
							</p>
						</div>
					</div>
				</div>
			</div>

			<div class="row row-cards-pf">
				<div class="col-xs-12 col-sm-6 col-md-6">
					<div class="card-pf">
						<h2 class="card-pf-title">Kommende Events</h2>
						<div class="card-pf-body">
							<table class="table">
								<tbody>
									<tr>
										<th>Status</th>
										<th>Veranstaltung</th>
										<th>Tage</th>
									</tr>
									<tr th:if="${#lists.isEmpty(stats.upcomingEvents)}">
										<td colspan="3" align="center" th:text="#{default.table.empty.text}">Data can not be found.</td>
									</tr>
									<tr th:each="event : ${stats.upcomingEvents}">
										<td>
											<span th:class="${event.status.label}" th:text="${#messages.msg('event.status.'+event.status.name()+'.label')}">[status]</span>
										</td>
										<td>
											<strong th:text="${event.name}">[name]</strong>
											<br/>
											<span th:text="${T(karstenroethig.laeufe.controller.formatter.DateRangeFormatter).format(event.eventPeriod, #messages.msg('default.dateFormat'))}">[startDate]-[endDate]</span>,
											<span th:text="${event.locationName}">[locationName]</span>,
											<span th:text="${event.locationCountry.name}">[locationCountry]</span>
										</td>
										<td>
											<span class="label label-default" th:text="${event.remainingDays}">[remainingDays]</span>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6">
					<div class="card-pf card-pf-utilization">
						<h2 class="card-pf-title">Beliebte Veranstalter</h2>
						<div class="card-pf-body">
							<div id="donut-set-of-values-to-a-whole"></div>
							<script>
								var c3ChartDefaults = $().c3ChartDefaults();
								
								var donutData = {
										type : 'donut',
										colors: {
											'7-Seen-Wanderung': $.pfPaletteColors.lightGreen,
											'Ammelhainer Schlosslauf': $.pfPaletteColors.purple,
											'CROSS DE LUXE': $.pfPaletteColors.green,
											'Firmenlauf Leipzig': Math.floor(Math.random()*16777215).toString(16),
											'Fishermans Friend StrongmanRun': $.pfPaletteColors.purple,
											'Fockeberglauf': $.pfPaletteColors.red,
											'Getting Tough': $.pfPaletteColors.gold,
											'Halbmarathon Leipzig': $.pfPaletteColors.lightBlue,
											'Mud Masters': $.pfPaletteColors.gold,
											'Spartan Race': $.pfPaletteColors.red,
											'Survival Run': 'white',
											'Tough Mudder': $.pfPaletteColors.orange,
											'Thougest': $.pfPaletteColors.green,
											'Wildsau Dirt Race': $.pfPaletteColors.cyan,
											'Xletix': $.pfPaletteColors.black
										},
										columns: [
											//['7-Seen-Wanderung', 1],
											//['Ammelhainer Schlosslauf', 2],
											['CROSS DE LUXE', 6],
											//['Firmenlauf Leipzig', 6],
											//['Fishermans Friend StrongmanRun', 2],
											['Fockeberglauf', 2],
											//['Getting Tough', 2],
											//['Halbmarathon Leipzig', 1],
											['Mud Masters', 1],
											['Spartan Race', 7],
											//['Survival Run', 1],
											['Tough Mudder', 16],
											//['Toughest', 1],
											//['Wildsau Dirt Run', 1],
											['Xletix', 4]
										],
										onclick: function (d, i) { console.log("onclick", d, i); },
										onmouseover: function (d, i) { console.log("onmouseover", d, i); },
										onmouseout: function (d, i) { console.log("onmouseout", d, i); }
									};
								
								var donutChartBottomConfig = c3ChartDefaults.getDefaultDonutConfig();

								donutChartBottomConfig.bindto = '#donut-set-of-values-to-a-whole';
								donutChartBottomConfig.tooltip = {show: true};
								donutChartBottomConfig.data = donutData;
								donutChartBottomConfig.legend = {
										show: true,
										position: 'right'
									};
								donutChartBottomConfig.size = {
										width: 271,
										height: 191
									};
								donutChartBottomConfig.tooltip = {
										contents: $().pfDonutTooltipContents
									};
								
								var donutChartBottomLegend = c3.generate(donutChartBottomConfig);

								$().pfSetDonutChartTitle("#donut-set-of-values-to-a-whole", "54", "Races");
							</script>
						</div>
					</div>
				</div>
			</div>
			
		</div>

	</body>
</html>